<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amazon FNSKU Label Printer</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="popup-container">
    <!-- Compact Header -->
    <div class="compact-header">
      <div class="tab-navigation">
        <button class="tab-btn active" data-tab="downloads">Downloads</button>
        <button class="tab-btn" data-tab="manual">Manual Entry</button>
        <button class="tab-btn settings-tab" data-tab="settings" title="">‚öôÔ∏è</button>
      </div>
      <button id="toggle-extension" class="toggle-btn" title="Toggle Extension">
        <span class="toggle-icon">‚è∏Ô∏è</span>
      </button>
    </div>

    <!-- Tab Content Container -->
    <div class="tab-content-container">

      <!-- Downloads Tab -->
      <div id="downloads-tab" class="tab-content active">
        <div class="downloads-section">
          <div id="downloads-list" class="downloads-list">
            <div class="no-downloads">
              <p>No labels generated yet</p>
              <p class="hint">Use Manual Entry or visit Amazon Seller Central to generate labels</p>
            </div>
          </div>

          <div class="downloads-footer">
            <div class="downloads-stats">
              <span id="downloads-count">0 labels</span>
            </div>
            <button id="clear-history" class="clear-btn" title="Clear History">üóëÔ∏è</button>
          </div>
        </div>
      </div>

      <!-- Manual Entry Tab -->
      <div id="manual-tab" class="tab-content">
        <div class="manual-entry-section">
          <form id="manual-entry-form" class="compact-form">
            <div class="form-row">
              <div class="form-group">
                <label for="manual-template">Template Override</label>
                <select id="manual-template" class="form-input">
                  <option value="">Use Global Template</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="manual-sku">SKU *</label>
                <input type="text" id="manual-sku" class="form-input" placeholder="e.g., 2xArmyFBA" required>
              </div>
              <div class="form-group">
                <label for="manual-fnsku">FNSKU *</label>
                <input type="text" id="manual-fnsku" class="form-input" placeholder="e.g., X002HB9ZDL"
                  pattern="^[A-Z0-9]{10}$" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="manual-asin">ASIN</label>
                <input type="text" id="manual-asin" class="form-input" placeholder="e.g., B0FXH65FKG"
                  pattern="^B[0-9A-Z]{9}$">
              </div>
              <div class="form-group">
                <label for="manual-quantity">Qty</label>
                <input type="number" id="manual-quantity" class="form-input" min="1" max="1000" value="1">
              </div>
            </div>

            <div class="form-group">
              <label for="manual-title">Product Title</label>
              <input type="text" id="manual-title" class="form-input" placeholder="Optional: Product title">
            </div>

            <div class="form-group">
              <label for="manual-condition">Condition</label>
              <input type="text" id="manual-condition" class="form-input" placeholder="NEW" value="NEW" maxlength="10">
              <div class="form-hint">Amazon compliance condition (e.g., NEW, USED, REFURBISHED)</div>
            </div>

            <div class="form-actions">
              <button type="button" id="load-sample" class="secondary-btn">Sample</button>
              <button type="button" id="clear-form" class="secondary-btn">Clear</button>
              <button type="submit" id="generate-manual" class="primary-btn">Generate Label</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settings-tab" class="tab-content">
        <div class="settings-section">

          <!-- Label Generation Section -->
          <div class="settings-group">
            <h3 class="group-title">Label Generation</h3>

            <div class="setting-group">
              <label>Template</label>
              <div class="template-selector">
                <div class="hybrid-selector">
                  <input type="text" id="template-name-input" class="setting-input template-name-input"
                    placeholder="Template name">
                  <button id="template-dropdown-btn" class="template-dropdown-btn" title="Select Template">‚ñº</button>
                  <div id="template-dropdown" class="template-dropdown-menu" style="display: none;">
                    <!-- Templates will be populated here -->
                  </div>
                </div>
                <button id="create-template-btn" class="template-btn" title="Create New Template">+</button>
              </div>
            </div>

            <div class="setting-group">
              <div class="dimension-controls">
                <div class="dimension-row">
                  <div class="dimension-input-group">
                    <label for="template-width">Width:</label>
                    <input type="number" id="template-width" class="setting-input dimension-input" min="10" max="500"
                      step="0.1" value="57">
                  </div>
                  <div class="dimension-input-group">
                    <label for="template-height">Height:</label>
                    <input type="number" id="template-height" class="setting-input dimension-input" min="10" max="500"
                      step="0.1" value="32">
                  </div>
                  <div class="dimension-input-group">
                    <label for="template-units">Units:</label>
                    <select id="template-units" class="setting-input dimension-input">
                      <option value="mm">mm</option>
                      <option value="in">inches</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <div class="setting-group">
              <div id="label-preview" class="label-preview" style="margin-top: 8px;">
                <div class="preview-loading">Loading preview...</div>
              </div>
            </div>

            <div class="setting-group">
              <label for="default-barcode">Barcode Format</label>
              <select id="default-barcode" class="setting-input">
                <option value="CODE128">CODE128</option>
                <option value="CODE39">CODE39</option>
                <option value="EAN13">EAN13</option>
              </select>
            </div>

            <div class="setting-group">
              <label for="pdf-dpi">PDF Quality (DPI)</label>
              <select id="pdf-dpi" class="setting-input">
                <option value="150">150 DPI (Fast)</option>
                <option value="300">300 DPI (Standard)</option>
                <option value="600">600 DPI (High Quality)</option>
              </select>
            </div>

            <div class="setting-group">
              <label>Font Sizes</label>
              <div class="font-size-controls">
                <div class="font-size-row">
                  <label for="fnsku-font-size">FNSKU:</label>
                  <input type="number" id="fnsku-font-size" class="setting-input font-size-input" min="4" max="20"
                    value="8">
                </div>
                <div class="font-size-row">
                  <label for="sku-font-size">SKU:</label>
                  <input type="number" id="sku-font-size" class="setting-input font-size-input" min="4" max="20"
                    value="11">
                </div>
                <div class="font-size-row">
                  <label for="title-font-size">Title:</label>
                  <input type="number" id="title-font-size" class="setting-input font-size-input" min="4" max="20"
                    value="6">
                </div>
              </div>
            </div>

            <div class="setting-group">
              <label>Content</label>
              <div class="content-options">
                <label class="checkbox-label">
                  <input type="checkbox" id="include-barcode" checked>
                  <span class="checkbox-text">Barcode</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="include-fnsku" checked>
                  <span class="checkbox-text">FNSKU</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="include-sku" checked>
                  <span class="checkbox-text">SKU</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="include-title" checked>
                  <span class="checkbox-text">Title</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="default-include-images">
                  <span class="checkbox-text">Images</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="include-condition" checked>
                  <span class="checkbox-text">Condition</span>
                </label>
              </div>
            </div>

            <div class="setting-group">
              <label>Amazon Condition</label>
              <div class="condition-settings">
                <div class="condition-row">
                  <label for="condition-text">Text:</label>
                  <input type="text" id="condition-text" class="setting-input condition-input" value="NEW" maxlength="10">
                </div>
                <div class="condition-row">
                  <label for="condition-position">Position:</label>
                  <select id="condition-position" class="setting-input condition-input">
                    <option value="bottom-left">Bottom Left</option>
                    <option value="bottom-right">Bottom Right</option>
                    <option value="title-prefix">Title Prefix</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- App Behavior Section -->
          <div class="settings-group">
            <h3 class="group-title">App Behavior</h3>

            <div class="setting-group">
              <div class="extension-options">
                <label class="checkbox-label">
                  <input type="checkbox" id="auto-extract">
                  <span class="checkbox-text">Auto-extract on page load</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="auto-open-tabs">
                  <span class="checkbox-text">Auto-open tabs</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="debug-mode">
                  <span class="checkbox-text">Debug mode</span>
                </label>
              </div>
            </div>
          </div>

          <div class="settings-actions">
            <button id="reset-settings" class="secondary-btn">Reset</button>
            <div class="auto-save-indicator" id="auto-save-indicator" style="display: none;">
              <span class="saving-text">Saving...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="../lib/jspdf.umd.min.js"></script>
  <script src="../lib/jsbarcode.all.min.js"></script>
  <script src="../content/template-manager.js"></script>
  <script src="../content/settings-manager.js"></script>
  <script src="../content/pdf-generator.js"></script>
  <script src="template-editor.js"></script>
  <script src="popup.js"></script>
</body>

</html>